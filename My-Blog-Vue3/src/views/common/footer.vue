<template>
  <footer id="footer">
    <div id="footer_icons" class="myCenter">
      <div>
        <a
          class="icon_link myCenter"
          data-pjax-state=""
          href="javascript:;"
          @click="toUrl('/about')"
          title="ä¸ªäººä¸»é¡µ"
        >
          <i class="iconfont icon-zhinanzhen"></i>
        </a>
        <a
          @click="copy(1)"
          class="icon_link contact-qq myCenter"
          href="javascript:;"
          title="è”ç³»QQ"
          data-pjax-state=""
        >
          <i class="iconfont icon-qq"></i>
        </a>
        <a
          @click="copy(2)"
          class="icon_link contact-wechat myCenter"
          href="javascript:;"
          title="è”ç³»å¾®ä¿¡"
          data-pjax-state=""
        >
          <i class="iconfont icon-weixin"></i>
        </a>
        <a
          class="icon_link myCenter"
          href="https://blog.csdn.net/qq_53461589?spm=1010.2135.3001.5421"
          title="CSDNä¸»é¡µ"
          data-pjax-state=""
        >
          <i class="iconfont icon-csdn"> </i>
        </a>
      </div>
      <img
        class="footer_logo entered loaded"
        src="/title.jpg"
        data-lazy-src="/title.jpg"
        data-ll-status="loaded"
      />
      <div>
        <a
          class="icon_link myCenter"
          target="_blank"
          rel="noopener"
          href="https://github.com/monkey-papa/POEMON-BLOG"
          title="Githubä¸»é¡µ"
        >
          <i class="iconfont icon-github"></i>
        </a>
        <a
          class="icon_link myCenter"
          target="_blank"
          rel="noopener"
          href="https://www.bilibili.com/video/BV1nh4y1m7CV/?spm_id_from=333.999.0.0"
          title="å“”å“©å“”å“©ä¸»é¡µ"
        >
          <i class="iconfont icon-wf_Bzhan"></i>
        </a>
        <a
          class="icon_link myCenter"
          target="_blank"
          rel="noopener"
          href="https://travellings.link"
          title="éšæœºè·³è½¬åˆ°å¦ä¸€ä¸ªåŠ å…¥å¼€å¾€çš„ç½‘é¡µ"
        >
          <i class="iconfont icon-huochepiao"></i>
        </a>
        <a
          class="icon_link myCenter"
          target="_blank"
          rel="noopener"
          href="https://www.foreverblog.cn/go.html"
          title="éšæœºè®¿é—®åå¹´ä¹‹çº¦å‹é“¾åšå®¢"
        >
          <i class="iconfont icon-AppIcon"></i>
        </a>
      </div>
    </div>
    <div id="footer_content">
      <div class="footer-group">
        <h3 class="footer-title">ç›´è¾¾</h3>
        <div class="footer-links">
          <a
            class="footer-item"
            @click="toUrl('/tools')"
            href="javascript:;"
            data-pjax-state=""
            >è—å®é˜</a
          >
          <a
            class="footer-item"
            @click="toUrl('/friend')"
            href="javascript:;"
            data-pjax-state=""
            >å‹é“¾</a
          >
          <a
            class="footer-item"
            @click="toUrl('/message')"
            href="javascript:;"
            data-pjax-state=""
            >ç•™è¨€å…</a
          >
          <a
            class="footer-item"
            @click="toUrl('/travel')"
            href="javascript:;"
            data-pjax-state=""
            >ä¸ªäººç›¸å†Œ</a
          >
          <a
            class="footer-item"
            @click="toUrl('/funny')"
            href="javascript:;"
            data-pjax-state=""
            >å¹»éŸ³åŠ</a
          >
        </div>
      </div>
      <div class="footer-group">
        <h3 class="footer-title">åˆ†ç±»</h3>
        <div class="footer-links">
          <a
            class="footer-item"
            @click="toUrl('/sort?sortId=1')"
            href="javascript:;"
            data-pjax-state=""
            >å­¦ä¹ ç¬”è®°</a
          >
          <a
            class="footer-item"
            @click="toUrl('/sort?sortId=6')"
            href="javascript:;"
            data-pjax-state=""
            >æˆ‘çš„é¡¹ç›®</a
          >
          <a
            class="footer-item"
            @click="toUrl('/sort?sortId=3')"
            href="javascript:;"
            data-pjax-state=""
            >æ¸¸æˆ</a
          >
          <a
            class="footer-item"
            @click="toUrl('/sort?sortId=4')"
            href="javascript:;"
            data-pjax-state=""
            >åŠ¨æ¼«</a
          >
          <a
            class="footer-item"
            @click="toUrl('/sort?sortId=7')"
            href="javascript:;"
            data-pjax-state=""
            >éšæƒ³</a
          >
          <a
            class="footer-item"
            @click="toUrl('/sort')"
            href="javascript:;"
            data-pjax-state=""
            >æŸ¥çœ‹å…¨éƒ¨</a
          >
        </div>
      </div>
      <div class="footer-group" id="friend-links-in-footer">
        <h3 class="footer-title">å‹é“¾</h3>
        <div class="footer-links">
          <a class="footer-item" target="_blank" href="https://poetize.cn/"
            >POETIZE</a
          >
          <a class="footer-item" target="_blank" href="https://www.qcqx.cn/"
            >è½»ç¬‘Chuckle</a
          >
          <a
            class="footer-item"
            target="_blank"
            href="https://blog.ezuxoay.top/home"
            >Ezuxoay</a
          >
          <a
            class="footer-item"
            target="_blank"
            href="https://blog.zhengxian.top/"
            >380AM-0204</a
          >
          <a
            class="footer-item"
            @click="toUrl('/friend')"
            href="javascript:;"
            data-pjax-state=""
            >æŸ¥çœ‹æ›´å¤š</a
          >
        </div>
      </div>
    </div>
    <div id="footer-bottom">
      <div class="footer-bottom-content">
        <div class="footer-bottom-left">
          <span
            >Copyright Â© 2023 By
            <a
              data-pjax-state=""
              href="javascript:;"
              @click="toUrl('/')"
              title="ç‚¹å‡»è®¿é—®Monkey-PaPaçš„ä¸»é¡µ"
              >Monkey-PaPa
            </a>
          </span>
          <div>
            <a
              class="footer-bottom-link"
              target="_blank"
              href="https://cloud.tencent.com/"
              title="è…¾è®¯äº‘æä¾›å›¾ç‰‡å­˜å‚¨å’Œç½‘ç«™æ‰˜ç®¡"
              >è…¾è®¯äº‘</a
            >
            <a
              class="footer-bottom-link"
              target="_blank"
              href="https://tongji.baidu.com/"
              title="ç™¾åº¦ç»Ÿè®¡æä¾›ç”¨æˆ·è®¿é—®ç»Ÿè®¡"
              >ç™¾åº¦ç»Ÿè®¡</a
            >
            <a
              class="footer-bottom-link"
              target="_blank"
              href="https://vercel.com/"
              title="Vercelæä¾›é•œåƒç«™æ‰˜ç®¡"
              >Vercel</a
            >
            <a
              class="footer-bottom-link"
              target="_blank"
              href="https://github.com/"
              title="Githubæä¾›æºç æ‰˜ç®¡"
              >Github</a
            >
          </div>
        </div>
        <div class="footer-bottom-right">
          <div id="runtime" title="æœ¬ç«™å·²è¿è¡Œ 1.10 å¤å¹´ğŸ”ğŸ€">
            æœ¬ç«™å·²è¿è¡Œï¼š{{ countdownChange }}
          </div>
          <div>
            <a
              class="footer-bottom-link"
              target="_blank"
              href="https://v2.cn.vuejs.org/v2/guide/"
              title="æ¡†æ¶"
              >Vue3</a
            >
            <a
              class="footer-bottom-link"
              target="_blank"
              href="https://docs.djangoproject.com/zh-hans/5.0/"
              title="æ¡†æ¶"
              >Django</a
            >
            <a class="footer-bottom-link" href="javascript:;" title="å¤‡æ¡ˆå·"
              >äº¬cpuå¤‡5201314å·</a
            >
          </div>
        </div>
      </div>
    </div>
  </footer>
</template>

<script setup>
import { notifySuccess } from "@/utils/notify";
import { ref, onMounted, onBeforeUnmount } from "vue";
import { useGlobalProperties } from "@/composables/useGlobalProperties";

const { $common, $router } = useGlobalProperties();

const countdownTime = ref("2023-08-13 00:00:00");
const countdownChange = ref("");
const countdownTimer = ref(null);

onMounted(() => {
  countdownTimer.value = setInterval(() => {
    countdown();
  }, 1000);
});

onBeforeUnmount(() => {
  if (countdownTimer.value) {
    clearInterval(countdownTimer.value);
    countdownTimer.value = null;
  }
});

const toUrl = (path) => {
  $router.push(path);
};

const copy = (val) => {
  const number = val === 1 ? "1816298537" : "z-poemon";
  const text = val === 1 ? "QQ" : "å¾®ä¿¡";
  const aux = document.createElement("input");
  aux.setAttribute("value", number);
  document.body.appendChild(aux);
  aux.select();
  document.execCommand("copy");
  document.body.removeChild(aux);
  notifySuccess(`æœ¬åšä¸»çš„${text}å·²ç»åˆ°ä½ çš„å‰ªè´´æ¿å•¦ï¼Œå¿«åŠ å…¥æˆ‘ä»¬å§~~ğŸ‰`);
};

const countdown = () => {
  if ($common.isEmpty(countdownTime.value)) {
    return;
  }
  const countdownResult = $common.countdown(countdownTime.value);
  countdownChange.value =
    countdownResult.d +
    "å¤©" +
    countdownResult.h +
    "æ—¶" +
    countdownResult.m +
    "åˆ†" +
    countdownResult.s +
    "ç§’";
  countdownChange.value = countdownChange.value.replace(/-/g, " ");
};
</script>

<style lang="scss" scoped>
#footer_icons,
#footer_content {
  margin: auto;
  background: var(--background);
}

#footer_icons {
  padding-top: 2rem;
  flex-wrap: wrap;

  > div {
    display: flex;
  }

  img.footer_logo {
    border-style: none;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    margin: 0 1rem;
    filter: drop-shadow(0 0 12px var(--blue22));
    transition: all 0.25s;

    &:hover {
      transform: scale(1.1);
      transition-duration: 0.4s;
    }
  }

  a {
    text-decoration: none;
    word-wrap: break-word;
    transition: all 0.2s;
    overflow-wrap: break-word;
  }

  .icon_link {
    height: 40px;
    width: 40px;
    margin: 1rem;
    background-color: var(--fontColor);
    border-radius: 50%;

    i {
      font-size: 20px;
      color: var(--favoriteBg);
    }

    &:hover {
      background: var(--red);
    }
  }
}

#footer_content {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  padding: 0 10rem 2rem;

  .footer-group {
    min-width: 120px;
    text-align: center;
  }

  .footer-title {
    color: var(--fontColor);
  }

  .footer-links {
    display: flex;
    flex-direction: column;
  }

  .footer-item {
    font-size: 1rem;
    line-height: 1.7;
    color: var(--fontColor);

    &:hover {
      color: var(--red);
    }
  }
}

#footer-bottom {
  padding: 1rem;
  background: var(--background);
  z-index: 2;

  .footer-bottom-content {
    display: flex;
    justify-content: space-between;
    max-width: 1100px;
    width: 100%;
    margin: 0 auto;
    flex-wrap: wrap;
  }

  .footer-bottom-left {
    a {
      margin-left: 5px;
    }
  }

  .footer-bottom-left,
  .footer-bottom-right {
    display: flex;
    flex-direction: column;
  }

  .footer-bottom-content * {
    font-size: 17px;
    white-space: nowrap;
    color: var(--fontColor);
  }

  .footer-bottom-left div,
  .footer-bottom-right div,
  .footer-bottom-left span,
  .footer-bottom-right span {
    display: flex;
    align-items: center;
  }

  a {
    display: flex;
    align-items: center;

    &:not(:first-child)::before {
      content: "|";
      font-size: 14px;
      line-height: 2.45;
      margin: 0 10px;
    }

    &:hover {
      color: var(--red);

      &:not(:first-child)::before {
        color: var(--fontColor);
      }
    }
  }

  .footer-bottom-right div {
    justify-content: flex-end;
  }
}

@media screen and (max-width: 768px) {
  #footer-bottom {
    padding: 1rem 0;

    .footer-bottom-content * {
      font-size: 1rem;
    }

    .footer-bottom-left,
    .footer-bottom-right {
      width: 100%;
      align-items: center;
    }
  }

  #footer_icons img.footer_logo {
    display: none;
  }

  #footer_content {
    padding: 1rem;

    .footer-group {
      text-align: center;
    }

    #friend-links-in-footer h3 {
      padding-left: 10px;
    }
  }
}
</style>
